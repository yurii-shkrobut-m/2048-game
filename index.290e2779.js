function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var r=!1,t=0,n=0,o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=document.querySelectorAll(".field-cell"),c=document.querySelectorAll(".field-row"),i=document.querySelector(".button"),u=document.querySelector(".message-start"),s=document.querySelector(".message-lose"),l=document.querySelector(".message-win"),f=document.querySelector(".game-score"),d=document.querySelector(".game-best"),m=[],v=!0,h=function(e){return e.filter(function(e){return 0!==e})},y=function(){return o.some(function(e){return e.some(function(e){return 0===e})})},b=function(){return Math.floor(4*Math.random())};function g(){if(y()&&v){do e=b(),r=b();while(0!==o[e][r])if(0===o[e][r]){var e,r,t=.9>Math.random()?2:4,n=c[e].children[r];o[e][r]=t,n.textContent=t,n.classList.add("field-cell--".concat(t))}}}function p(){a.forEach(function(e){e.textContent="",e.className="field-cell"});for(var e=0;e<o.length;e++)for(var r=0;r<o[e].length;r++){var i=c[e].children[r],u=o[e][r];0!==u&&(i.textContent=u,i.classList.add("field-cell--".concat(u)))}f.textContent=t,d.textContent=n}function A(r){var n,o=function(r){if(Array.isArray(r))return e(r)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(r,t){if(r){if("string"==typeof r)return e(r,void 0);var n=Object.prototype.toString.call(r).slice(8,-1);if("Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(r,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();o=h(o);for(var a=0;a<o.length-1;a++)o[a]===o[a+1]&&(o[a]*=2,o[a+1]=0,t+=o[a]);for(o=h(o);o.length<4;)o.push(0);return m.push((n=o,r.some(function(e){return r[e]!==n[e]}))),v=m.includes(!0),o}function S(e,r,t){for(var n=0;n<=r;n++)o[n][e]=t[n]}i.addEventListener("click",function(){i.classList.contains("restart")?(o.forEach(function(e){return e.fill(0)}),t>n&&(n=t,t=0),t=0,p(),s.classList.add("hidden")):(i.className="button restart",i.textContent="Restart",u.classList.add("hidden")),r=!0,g(),g()}),document.addEventListener("keydown",function(e){if(r){switch(e.preventDefault(),e.key){case"ArrowLeft":(function(){for(var e=0;e<4;e++){var r=o[e];r=A(r),o[e]=r}})(),g();break;case"ArrowRight":(function(){for(var e=0;e<4;e++){var r=o[e];r.reverse(),(r=A(r)).reverse(),o[e]=r}})(),g();break;case"ArrowUp":(function(){for(var e=0;e<4;e++){var r=[o[0][e],o[1][e],o[2][e],o[3][e]];S(e,3,r=A(r))}})(),g();break;case"ArrowDown":(function(){for(var e=0;e<4;e++){var r=[o[0][e],o[1][e],o[2][e],o[3][e]];r.reverse(),(r=A(r)).reverse(),S(e,3,r)}})(),g()}m=[],p(),o.some(function(e){return e.some(function(e){return 2048===e})})&&(l.classList.remove("hidden"),r=!1),y()||function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(r<3&&o[e][r]===o[e][r+1]||e<3&&o[e][r]===o[e+1][r])return!0;return!1}()||(s.classList.remove("hidden"),r=!1)}});
//# sourceMappingURL=index.290e2779.js.map
